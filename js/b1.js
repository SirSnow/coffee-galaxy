var w=window.innerWidth,h=window.innerHeight,circleWidth=5,fontFamily="Bree Serif",fontSizeHighlight="1.5em",fontSizeNormal="1em",palette={lightgray:"#2a2a2a",gray:"#708284",mediumgray:"#536870",darkgray:"#475B62",darkblue:"#0027bb",darkerblue:"#042029",paleryellow:"#FCF4DC",paleyellow:"#EAE3CB",yellow:"#A57706",orange:"#BD3613",red:"#D11C24",pink:"#C61C6F",purple:"#595AB7",blue:"#2176C7",green:"#259286",yellowgreen:"#738A05"},nodes=[{name:"Five elephant",value:35,image:"image/little_star1.gif"},
{name:"\u6765\u81ea\u67cf\u6797",value:30,image:"image/little_star1.png"},{name:"\u7cbe\u6d4b\u5496\u5561\u53c2\u6570",value:30,image:"image/little_star2.png"},{name:"\u5317\u6b27\u6d45\u6d2a",value:30,image:"image/little_star3.png"},{name:"\u6781\u7b80\u7a7a\u95f4\u8bbe\u8ba1",value:30,image:"image/little_star4.png"},{name:"\u7ebf\u4e0a\u552e\u5356",value:14,image:"image/little_star5.png"}],links=[{source:nodes[1],target:nodes[0]},{source:nodes[2],target:nodes[0]},{source:nodes[3],target:nodes[0]},
{source:nodes[4],target:nodes[0]},{source:nodes[5],target:nodes[0]}],vis=d3.select("body").append("svg").attr("class","stage").attr("width",w).attr("height",h),force=d3.layout.force().nodes(nodes).links([]).gravity(.1).charge(-1E3).size([w,h]),link=vis.selectAll(".link").data(links).enter().append("line").attr("class","link").attr("stroke",palette.lightgray).attr("fill","none"),node=vis.selectAll(".node").data(nodes).enter().append("g").attr("class","node").on("click",function(b,a){5==a&&(window.location.href=
"https://fiveelephant.taobao.com/?spm=2013.1.1000126.2.dR8V4R")}).call(force.drag);node.append("svg:image").attr("xlink:href",function(b,a){return nodes[a].image}).attr("x",function(b,a){return-nodes[a].value/2}).attr("y",function(b,a){return-nodes[a].value/2}).attr("width",function(b,a){return nodes[a].value}).attr("height",function(b,a){return nodes[a].value}).on("click",function(b,a){window.location.href="http://www.dianping.com/shop/66671047"});
node.append("text").text(function(b,a){return b.name}).attr("x",function(b,a){return 0<a?circleWidth+5:-10}).attr("y",function(b,a){return 0<a?circleWidth+0:8}).attr("font-family","Bree Serif").attr("fill",function(b,a){return 0<a?palette.paleryellow:palette.darkblue}).attr("font-size",function(b,a){return 0<a?"1em":"1.8em"}).attr("text-anchor",function(b,a){return 0<a?"beginning":"end"});
force.on("tick",function(b){node.attr("transform",function(a,b){return"translate("+a.x+","+a.y+")"});link.attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y})});force.start();
